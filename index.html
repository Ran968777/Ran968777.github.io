<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Ran">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Hexo</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hexo</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/06/12/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E5%90%8E%E7%9A%84%E6%9F%A5%E8%AF%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ran">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/12/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E5%90%8E%E7%9A%84%E6%9F%A5%E8%AF%A2/" class="post-title-link" itemprop="url">åˆ†åº“åˆ†è¡¨åçš„æŸ¥è¯¢</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2025-06-12 14:16:31 / ä¿®æ”¹æ—¶é—´ï¼š14:17:31" itemprop="dateCreated datePublished" datetime="2025-06-12T14:16:31+08:00">2025-06-12</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="åˆ†åº“åˆ†è¡¨åæŸ¥è¯¢çš„é—®é¢˜"><a href="#åˆ†åº“åˆ†è¡¨åæŸ¥è¯¢çš„é—®é¢˜" class="headerlink" title="åˆ†åº“åˆ†è¡¨åæŸ¥è¯¢çš„é—®é¢˜"></a>åˆ†åº“åˆ†è¡¨åæŸ¥è¯¢çš„é—®é¢˜</h1><p>åˆ†åº“åˆ†è¡¨åï¼ŒæŸ¥è¯¢éœ€è¦è·¨åº“orè·¨è¡¨ï¼Œæ€ä¹ˆåšå‘¢</p>
<p>æ¯”å¦‚å­˜åœ¨ä¸¤ä¸ªåº“db0, db1 ï¼Œä¸¤ä¸ªåº“ä¸­éƒ½æœ‰orderè¡¨ï¼Œæ•°æ®æ ¹æ®order_id æ¨¡2åˆ¤å®šå­˜åœ¨äºå“ªä¸ªåº“</p>
<p>db0 ä¸­çš„æ•°æ®: 2, 4 ,6 ,8</p>
<p>db1 ä¸­çš„æ•°æ®: 1, 3, 5 ,7</p>
<p>å‡è®¾ç°åœ¨éœ€è¦æŸ¥è¯¢ã€‚pageSize ä¸º 2ï¼Œ pageNo ä¸º2çš„æ•°æ®ï¼Œä¸Šå¸è§†è§’æ¥çœ‹ï¼Œæ•°æ®æ˜¯1,2,3,4,5,6,7,8ã€‚ æ‰€ä»¥æœ€åçš„ç»“æœåº”è¯¥æ˜¯order_idä¸º 3,4çš„æ•°æ®ã€‚</p>
<h3 id="å…¨å±€è§†é‡"><a href="#å…¨å±€è§†é‡" class="headerlink" title="å…¨å±€è§†é‡"></a>å…¨å±€è§†é‡</h3><aside>
ğŸ’¡ä»ä¸åŒçš„èŠ‚ç‚¹ä¸­è·å–æ•°æ®ï¼Œç„¶ååœ¨å†…å­˜ä¸­åšå¤„ç†
</aside>

<p>ç¼ºç‚¹ï¼š </p>
<ul>
<li>æ¯ä¸ªèŠ‚ç‚¹ä¼šè¿”å›æ›´å¤šçš„æ•°æ®</li>
<li>éšç€é¡µç çš„å¢å¤§ï¼Œæ€§èƒ½ä¼šä¸‹é™</li>
</ul>
<p>ä¼ ç»Ÿç»“æ„ä¸‹ï¼Œåªéœ€è¦è¿™æ ·æŸ¥è¯¢å³å¯è¾¾æˆè¦æ±‚</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> `<span class="keyword">order</span>` <span class="keyword">order</span> <span class="keyword">by</span> order_id limit <span class="number">2</span> <span class="keyword">offset</span> <span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šé¢åˆ†åº“åˆ†è¡¨çš„åœºæ™¯ä¸‹ï¼šè¿™æ¡ sql ä¼šå–åˆ° db0 ä¸­çš„ 6,8 å’Œ db1 ä¸­çš„5,7 ã€‚è¿™æ ·çš„ç»“æœé›†åŠæ—¶ç»è¿‡å¤„ç†ä¹Ÿæ— æ³•è·å¾—æ­£ç¡®çš„ç»“æœï¼Œæ‰€ä»¥éœ€è¦æ”¹å†™sql ä¸º</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> `<span class="keyword">order</span>` <span class="keyword">order</span> <span class="keyword">by</span> order_id limit <span class="number">4</span> <span class="keyword">offset</span> <span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>åˆ†åˆ«è·å– db0 , db1 ä¸­çš„å‰4æ¡æ•°æ®ï¼Œç„¶åå†åˆ°å†…å­˜ä¸­å¤„ç†ã€‚</p>
<h2 id="åç»­é¡µæŸ¥è¯¢"><a href="#åç»­é¡µæŸ¥è¯¢" class="headerlink" title="åç»­é¡µæŸ¥è¯¢"></a>åç»­é¡µæŸ¥è¯¢</h2><aside>
ğŸ’¡ç”¨ä¸Šä¸€é¡µçš„max_order_id åšä¸ºèµ·ç‚¹ï¼Œå–åç»­çš„næ¡è®°å½•ã€‚
</aside>

<p>ç¼ºç‚¹ï¼šä¸æ”¯æŒéšæœºè·³é¡µ</p>
<p>æ¯”å¦‚ç¬¬ä¸€é¡µçš„max_order_idæ˜¯2ã€‚ç¬¬äºŒé¡µçš„æŸ¥è¯¢sqlå¦‚ä¸‹</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> `<span class="keyword">order</span>` <span class="keyword">where</span> order_id <span class="operator">&gt;</span> <span class="number">2</span> <span class="keyword">order</span> <span class="keyword">by</span> order_id limit <span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>åœ¨ db0 å’Œ db1 ä¸­åˆ†åˆ«æ‰§è¡Œæ­¤sql å°±ä¼šè·å–åˆ° ã€4,6ã€‘ å’Œã€3,5ã€‘çš„æ•°æ®ã€‚ç„¶åå†åˆ°å†…å­˜ä¸­åšåˆ†é¡µï¼Œä¹Ÿèƒ½è·å–åˆ°æ­£ç¡®çš„ç»“æœ</p>
<h3 id="äºŒæ¬¡æŸ¥è¯¢"><a href="#äºŒæ¬¡æŸ¥è¯¢" class="headerlink" title="äºŒæ¬¡æŸ¥è¯¢"></a>äºŒæ¬¡æŸ¥è¯¢</h3><p>æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<p>ï¼ˆ1ï¼‰SQLæ”¹å†™ï¼Œå°† order by time offset X limit Y; æ”¹å†™æˆ order by time offset X&#x2F;N limit Y;</p>
<p>ï¼ˆ2ï¼‰å¤šé¡µè¿”å›ï¼Œæ‰¾åˆ°æœ€å°å€¼time_minï¼Œåˆ†é¡µè®°å½•çš„æ—¶é—´ä¸€å®šå¤§äºç­‰äºtime_minï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰ï¼›</p>
<p>ï¼ˆ3ï¼‰betweenäºŒæ¬¡æŸ¥è¯¢ order by time between $time_min and $time_i_max;</p>
<p>ï¼ˆ4ï¼‰è®¾ç½®è™šæ‹Ÿtime_minï¼Œæ‰¾åˆ°time_minåœ¨å„ä¸ªåˆ†åº“çš„offsetï¼Œä»è€Œå¾—åˆ°time_minåœ¨å…¨å±€çš„offsetï¼›</p>
<p>ï¼ˆ5ï¼‰å¾—åˆ°äº†time_minåœ¨å…¨å±€çš„offsetï¼Œè‡ªç„¶å¾—åˆ°äº†å…¨å±€çš„ offset X limit Yï¼›</p>
<aside>
ğŸ’¡è¿™ç§æ–¹æ³•çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œé€šè¿‡ä¸€ä¸ªâ€œç²—ç•¥â€çš„ç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼Œæ‰¾åˆ°ä¸€ä¸ªæ—¶é—´èŒƒå›´ï¼ˆæˆ–ç±»ä¼¼çš„æ’åºå­—æ®µèŒƒå›´ï¼‰ï¼Œç„¶ååœ¨è¿™ä¸ªèŒƒå›´å†…è¿›è¡Œç¬¬äºŒæ¬¡â€œç²¾ç¡®â€çš„æŸ¥è¯¢ï¼Œä»¥å®šä½åˆ°çœŸæ­£éœ€è¦çš„æ•°æ®ã€‚

<p>å› ä¸ºåˆ†é¡µçš„æœ¬è´¨æ˜¯è·³è¿‡å‰ X æ¡è®°å½•ï¼Œè€Œ time_min æ­£æ˜¯é‚£ä¸ªâ€œç¬¬ X æ¡è®°å½•â€çš„æ—¶é—´å€¼ï¼ŒçŸ¥é“äº†å®ƒåœ¨æ’åºä¸­çš„ä½ç½®ï¼Œå°±èƒ½ç²¾å‡†åˆ†é¡µã€‚</p>
<p>ç¼ºç‚¹ï¼šæŸ¥è¯¢æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦äºŒæ¬¡æŸ¥è¯¢</p>
</aside>

<p>æ”¹å†™sqlï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xä¸º <span class="number">2</span>ï¼Œlimit <span class="number">2</span> ,n ä¹Ÿæ˜¯<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> `<span class="keyword">order</span>` <span class="keyword">order</span> <span class="keyword">by</span> order_id limit <span class="number">2</span> <span class="keyword">offset</span> <span class="number">1</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åœ¨db0 æŸ¥è¯¢åˆ°çš„ç»“æœæ˜¯ï¼šã€4,6ã€‘ï¼Œåœ¨db1 æŸ¥è¯¢åˆ°çš„ç»“æœæ˜¯ã€3,5ã€‘</p>
<p>å¾—åˆ°min_order_id ä¸º3 ã€‚å†æ‰§è¡Œä¸€æ¬¡between min_order_id and max_idåï¼Œç»“æœä¸ç¬¬ä¸€æ¬¡ä¸€è‡´ã€‚</p>
<p>æ­¤æ—¶ä¼°ç®—order_idä¸º3çš„æ•°æ®åœ¨å…¨å±€çš„offsetä¸º 1 (ç¬¬ä¸€ä¸ªè¯­å¥ä¸­çš„offset 1) + 1 (ç¬¬äºŒä¸ªè¯­å¥ä¸­çš„offst ä¹Ÿæ˜¯1) &#x3D; 2ã€‚</p>
<p>æ‰€ä»¥order_id çš„å…¨å±€offsetä¸º2ã€‚åœ¨ä¼ ç»Ÿå•è¡¨çš„æƒ…å†µä¸‹ä¹Ÿéœ€è¦offset 2 ,limit 2çš„æ•°æ®ã€‚æ‰€ä»¥åœ¨ã€4,6ã€‘å’Œã€3,5ã€‘åˆå¹¶åå†æ’åºï¼Œä»3å¼€å§‹å–æ•°ï¼Œå†å–ä¸¤ä¸ªä½ç½®å³å¯ï¼Œæœ€åçš„ç»“æœå°±æ˜¯ã€3,4ã€‘ã€‚</p>
<p>ç¬¬(4)æ­¥æ‰¾åˆ°time_minçš„å…¨å±€offsetæ¯”è¾ƒéš¾ï¼Œçœ‹äº†å¾ˆä¹…æ‰ç†æ˜ç™½ã€‚</p>
<p>å¯ä»¥å‚è€ƒï¼š</p>
<p><a target="_blank" rel="noopener" href="https://blog.healerjean.com/database/2019/09/11/1_%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E8%A7%A3%E9%87%8A%E4%BB%A5%E5%8F%8A%E9%97%AE%E9%A2%98%E5%87%BA%E7%8E%B0/#23%E5%88%86%E7%BB%84-%E6%9F%A5%E5%87%BA%E6%9D%A5%E5%86%8D%E8%AE%A1%E7%AE%97"><em>https://blog.healerjean.com/database/2019/09/11/1_åˆ†åº“åˆ†è¡¨è§£é‡Šä»¥åŠé—®é¢˜å‡ºç°&#x2F;#23åˆ†ç»„-æŸ¥å‡ºæ¥å†è®¡ç®—</em></a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/7141194628472487972#heading-9"><em>https://juejin.cn/post/7141194628472487972#heading-9</em></a></p>
<p>ä¸€äº›ç†è§£ï¼Œä¸Šè¿°çš„æ–¹æ³•æ„Ÿè§‰ä¸æ˜¯å¾ˆæ–¹ä¾¿ã€‚ç†è§£æˆæœ¬ä¹Ÿå¾ˆé«˜ã€‚å¯¹äºè¯»å¤šå†™å°‘çš„ç³»ç»Ÿæ¥è¯´ã€‚è¿˜æ˜¯å¯ä»¥è€ƒè™‘ä½¿ç”¨ç±»ä¼¼esè¿™ç±»çš„ä¸­é—´ä»¶æ¥åšå¤æ‚çš„æŸ¥è¯¢ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/06/12/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E7%9A%84%E5%B0%8F%E5%AE%9E%E6%88%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ran">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/12/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E7%9A%84%E5%B0%8F%E5%AE%9E%E6%88%98/" class="post-title-link" itemprop="url">åˆ†åº“åˆ†è¡¨çš„å°å®æˆ˜</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2025-06-12 14:14:14 / ä¿®æ”¹æ—¶é—´ï¼š14:16:12" itemprop="dateCreated datePublished" datetime="2025-06-12T14:14:14+08:00">2025-06-12</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="åˆ†åº“åˆ†è¡¨"><a href="#åˆ†åº“åˆ†è¡¨" class="headerlink" title="åˆ†åº“åˆ†è¡¨"></a>åˆ†åº“åˆ†è¡¨</h1><h2 id="âœ…-ä¸€ã€ä¸šåŠ¡åœºæ™¯è®¾å®š"><a href="#âœ…-ä¸€ã€ä¸šåŠ¡åœºæ™¯è®¾å®š" class="headerlink" title="âœ… ä¸€ã€ä¸šåŠ¡åœºæ™¯è®¾å®š"></a>âœ… ä¸€ã€ä¸šåŠ¡åœºæ™¯è®¾å®š</h2><p>å‡è®¾ä½ æœ‰ä¸€ä¸ªç”µå•†è®¢å•ç³»ç»Ÿï¼Œéœ€è¦å°†è®¢å•æ•°æ®è¿›è¡Œåˆ†åº“åˆ†è¡¨ã€‚</p>
<ul>
<li>æ•°æ®åº“ï¼š2 ä¸ªï¼ˆ<code>order_db_0</code>, <code>order_db_1</code>ï¼‰</li>
<li>è¡¨ï¼šæ¯ä¸ªåº“ä¸­ 2 ä¸ªåˆ†è¡¨ï¼ˆ<code>t_order_0</code>, <code>t_order_1</code>ï¼‰</li>
<li>è·¯ç”±è§„åˆ™ï¼š<code>user_id % 2</code> å†³å®šåº“ï¼Œ<code>order_id % 2</code> å†³å®šè¡¨ï¼ˆåˆ†åº“ã€åˆ†è¡¨çš„å†³ç­–ã€‚è¿™æ˜¯ä¸€ä¸ªå¯ä»¥æ‰©å±•çš„ç‚¹ï¼‰</li>
</ul>
<h2 id="âœ…-äºŒã€æŠ€æœ¯é€‰å‹"><a href="#âœ…-äºŒã€æŠ€æœ¯é€‰å‹" class="headerlink" title="âœ… äºŒã€æŠ€æœ¯é€‰å‹"></a>âœ… äºŒã€æŠ€æœ¯é€‰å‹</h2><p><strong>æ•°æ®åº“</strong>ï¼šMySQL 8</p>
<p><strong>ORM æ¡†æ¶</strong>ï¼šMyBatis-Plus æˆ–åŸç”Ÿ JDBC</p>
<p><strong>åˆ†ç‰‡ä¸­é—´ä»¶</strong>ï¼šShardingSphere-JDBC</p>
<h2 id="ä¸‰ã€æ•°æ®åº“å¯åŠ¨"><a href="#ä¸‰ã€æ•°æ®åº“å¯åŠ¨" class="headerlink" title="ä¸‰ã€æ•°æ®åº“å¯åŠ¨"></a>ä¸‰ã€æ•°æ®åº“å¯åŠ¨</h2><p>ä½¿ç”¨docker-composeå¯åŠ¨ä¸¤ä¸ªæ•°æ®åº“å®ä¾‹</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3.8&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">mysql-db0:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql:8.0.32</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">mysql-db0</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">MYSQL_DATABASE:</span> <span class="string">order_db_0</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;23306:3306&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./db0/init.sql:/docker-entrypoint-initdb.d/init.sql</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">db0-data:/var/lib/mysql</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">mysql-db1:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql:8.0.32</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">mysql-db1</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">MYSQL_DATABASE:</span> <span class="string">order_db_1</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;23307:3306&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./db1/init.sql:/docker-entrypoint-initdb.d/init.sql</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">db1-data:/var/lib/mysql</span></span><br><span class="line"></span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line">  <span class="attr">db0-data:</span></span><br><span class="line">  <span class="attr">db1-data:</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="æ ¸å¿ƒçš„yamlé…ç½®"><a href="#æ ¸å¿ƒçš„yamlé…ç½®" class="headerlink" title="æ ¸å¿ƒçš„yamlé…ç½®"></a>æ ¸å¿ƒçš„yamlé…ç½®</h2><p>application.yml</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">fen_ku_fen_biao</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">org.apache.shardingsphere.driver.ShardingSphereDriver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:shardingsphere:classpath:sharding-config.yaml</span></span><br><span class="line">    </span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<p>sharding-config.yaml</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dataSources:</span></span><br><span class="line">  <span class="attr">ds_0:</span></span><br><span class="line">    <span class="attr">driverClassName:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">dataSourceClassName:</span> <span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line">    <span class="attr">jdbcUrl:</span> <span class="string">jdbc:mysql://localhost:23306/order_db_0?allowPublicKeyRetrieval=true&amp;serverTimezone=UTC&amp;useSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">  <span class="attr">ds_1:</span></span><br><span class="line">    <span class="attr">driverClassName:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">dataSourceClassName:</span> <span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line">    <span class="attr">jdbcUrl:</span> <span class="string">jdbc:mysql://localhost:23307/order_db_1?allowPublicKeyRetrieval=true&amp;serverTimezone=UTC&amp;useSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line"></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="type">!SHARDING</span></span><br><span class="line">    <span class="attr">tables:</span></span><br><span class="line">      <span class="attr">t_order:</span></span><br><span class="line">        <span class="attr">actualDataNodes:</span> <span class="string">ds_$&#123;0..1&#125;.t_order_$&#123;0..1&#125;</span></span><br><span class="line">        <span class="attr">databaseStrategy:</span></span><br><span class="line">          <span class="attr">standard:</span></span><br><span class="line">            <span class="attr">shardingColumn:</span> <span class="string">user_id</span></span><br><span class="line">            <span class="attr">shardingAlgorithmName:</span> <span class="string">t_user_inline</span></span><br><span class="line">        <span class="attr">tableStrategy:</span></span><br><span class="line">          <span class="attr">standard:</span></span><br><span class="line">            <span class="attr">shardingColumn:</span> <span class="string">order_id</span></span><br><span class="line">            <span class="attr">shardingAlgorithmName:</span> <span class="string">t_order_inline</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">defaultDatabaseStrategy:</span></span><br><span class="line">      <span class="attr">standard:</span></span><br><span class="line">        <span class="attr">shardingColumn:</span> <span class="string">user_id</span></span><br><span class="line">        <span class="attr">shardingAlgorithmName:</span> <span class="string">default_database_inline</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">shardingAlgorithms:</span></span><br><span class="line">      <span class="attr">default_database_inline:</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">INLINE</span></span><br><span class="line">        <span class="attr">props:</span></span><br><span class="line">          <span class="attr">algorithm-expression:</span> <span class="string">ds_1</span></span><br><span class="line">      <span class="attr">t_user_inline:</span></span><br><span class="line">        <span class="attr">type:</span>  <span class="string">INLINE</span></span><br><span class="line">        <span class="attr">props:</span></span><br><span class="line">          <span class="attr">algorithm-expression:</span> <span class="string">ds_$&#123;user_id</span> <span class="string">%</span> <span class="number">2</span><span class="string">&#125;</span></span><br><span class="line">      <span class="attr">t_order_inline:</span></span><br><span class="line">        <span class="attr">type:</span>  <span class="string">INLINE</span></span><br><span class="line">        <span class="attr">props:</span></span><br><span class="line">          <span class="attr">algorithm-expression:</span> <span class="string">t_order_$&#123;order_id</span> <span class="string">%</span> <span class="number">2</span><span class="string">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">props:</span></span><br><span class="line">  <span class="attr">sql-show:</span> <span class="literal">true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="ä»£ç ä»“åº“"><a href="#ä»£ç ä»“åº“" class="headerlink" title="ä»£ç ä»“åº“"></a>ä»£ç ä»“åº“</h3><p><a target="_blank" rel="noopener" href="https://github.com/Ran968777/fen_ku_fen_biao.git">https://github.com/Ran968777/fen_ku_fen_biao.git</a></p>
<h2 id=""><a href="#" class="headerlink" title=""></a></h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/06/11/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8-%E5%88%86%E7%89%87%E9%94%AE%E4%B8%8E%E5%88%86%E7%89%87%E7%AE%97%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ran">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/06/11/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8-%E5%88%86%E7%89%87%E9%94%AE%E4%B8%8E%E5%88%86%E7%89%87%E7%AE%97%E6%B3%95/" class="post-title-link" itemprop="url">åˆ†åº“åˆ†è¡¨-åˆ†ç‰‡é”®ä¸åˆ†ç‰‡ç®—æ³•</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2025-06-11 16:25:34 / ä¿®æ”¹æ—¶é—´ï¼š16:28:12" itemprop="dateCreated datePublished" datetime="2025-06-11T16:25:34+08:00">2025-06-11</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="åˆ†ç‰‡é”®ä¸åˆ†ç‰‡ç®—æ³•"><a href="#åˆ†ç‰‡é”®ä¸åˆ†ç‰‡ç®—æ³•" class="headerlink" title="åˆ†ç‰‡é”®ä¸åˆ†ç‰‡ç®—æ³•"></a>åˆ†ç‰‡é”®ä¸åˆ†ç‰‡ç®—æ³•</h1><h2 id="åˆ†åº“åˆ†è¡¨çš„åˆ†ç‰‡é”®çš„é€‰æ‹©ï¼Ÿ"><a href="#åˆ†åº“åˆ†è¡¨çš„åˆ†ç‰‡é”®çš„é€‰æ‹©ï¼Ÿ" class="headerlink" title="åˆ†åº“åˆ†è¡¨çš„åˆ†ç‰‡é”®çš„é€‰æ‹©ï¼Ÿ"></a>åˆ†åº“åˆ†è¡¨çš„åˆ†ç‰‡é”®çš„é€‰æ‹©ï¼Ÿ</h2><ul>
<li>ä½¿ç”¨é«˜é¢‘å­—æ®µ</li>
<li>å¯ä»¥è®©å„åˆ†ç‰‡æ•°æ®å‡åŒ€</li>
<li>å°½é‡ä¿è¯äº‹åŠ¡éƒ½åœ¨åŒä¸€ä¸ªåˆ†ç‰‡å†…</li>
</ul>
<p>åŸºå› åˆ†ç‰‡ï¼š</p>
<p>åœ¨ä¸€ä¸ªç”µå•†åœºæ™¯ä¸­ï¼Œä½¿ç”¨è®¢å•idå’Œä¹°å®¶idæŸ¥è¯¢æ•°æ®çš„è¯ã€‚å¯ä»¥é‡‡ç”¨å°†ä¹°å®¶idéƒ¨åˆ†æå–åˆ°è®¢å•idä¸­ã€‚è¿™æ ·å°±å¯ä»¥è®©ç”¨ä¸€ä¸ªç”¨æˆ·çš„è®¢å•éƒ½æ”¾åœ¨ä¸€ä¸ªè®¢å•ä¸­</p>
<h2 id="åˆ†ç‰‡ç®—æ³•"><a href="#åˆ†ç‰‡ç®—æ³•" class="headerlink" title="åˆ†ç‰‡ç®—æ³•"></a>åˆ†ç‰‡ç®—æ³•</h2><aside>
ğŸ’¡æ ¹æ®åˆ†ç‰‡é”®çš„å€¼è®¡ç®—å‡ºæ•°æ®åº”è¯¥å­˜æ”¾åœ¨å“ªé‡Œ
</aside>

<h3 id="å“ˆå¸Œåˆ†ç‰‡"><a href="#å“ˆå¸Œåˆ†ç‰‡" class="headerlink" title="å“ˆå¸Œåˆ†ç‰‡"></a>å“ˆå¸Œåˆ†ç‰‡</h3><p>æ¯”è¾ƒç®€å•çš„ç®—æ³•å°±æ˜¯å¯¹è®¡ç®—åˆ†ç‰‡é”®çš„ä½™æ•°ã€‚</p>
<p>ä¼˜ç‚¹ï¼šæ•°æ®æ¯”è¾ƒåˆ†æ•£ï¼Œä¸ä¼šå­˜åœ¨æŸä¸ªåˆ†ç‰‡æœ‰å¤§é‡æ•°æ®ï¼Œæ¯”è¾ƒå‡åŒ€</p>
<p>ç¼ºç‚¹ï¼šåˆ†ç‰‡æ‰©å®¹æ¯”è¾ƒå¤æ‚ï¼ŒèŒƒå›´æŸ¥è¯¢ä¸æ–¹ä¾¿</p>
<h3 id="èŒƒå›´åˆ†ç‰‡ï¼ˆRangeï¼‰"><a href="#èŒƒå›´åˆ†ç‰‡ï¼ˆRangeï¼‰" class="headerlink" title="èŒƒå›´åˆ†ç‰‡ï¼ˆRangeï¼‰"></a>èŒƒå›´åˆ†ç‰‡ï¼ˆRangeï¼‰</h3><p>å¯ä»¥æ ¹æ®æ—¶é—´çš„åˆ†ç‰‡ï¼Œä¸ªäººè§‰å¾—æ¯”è¾ƒé€‚ç”¨çš„åœºæ™¯æœ‰ï¼šåœ¨Bç«¯åœºæ™¯ä¸‹ï¼Œå¯¹å†…éƒ¨çš„è®¢å•è¿›è¡ŒæŒ‰æ—¶é—´åˆ†ç‰‡ã€‚å› ä¸ºå…¬å¸å†…éƒ¨ç»å¸¸ä¼šæŒ‰æ—¶é—´ç»´åº¦æ¥è€ƒé‡ä¸šåŠ¡çš„ä¸€äº›æƒ…å†µ</p>
<p>ä¼˜ç‚¹ï¼šæŸ¥è¯¢è½åœ¨å•ä¸ªåˆ†ç‰‡èŒƒå›´æ—¶ï¼Œæ•ˆç‡é«˜ã€‚æ˜“æ‰©å®¹ï¼Œä¹Ÿæ”¯æŒåŠ¨æ€æ‰©å®¹</p>
<p>ç¼ºç‚¹ï¼šå®¹æ˜“çƒ­ç‚¹ï¼šè‹¥åˆ†ç‰‡é”®å€¼è¿ç»­ï¼Œæ–°æ•°æ®éƒ½ä¼šè½å…¥åŒä¸€ä¸ªåˆ†ç‰‡ï¼Œé€ æˆå†™çƒ­ç‚¹ï¼›çƒ­é—¨èŒƒå›´æ•°æ®å®¹æ˜“é€ æˆåº¦çƒ­ç‚¹</p>
<h3 id="é…ç½®è¡¨åˆ†ç‰‡ï¼ˆconfig-dictï¼‰"><a href="#é…ç½®è¡¨åˆ†ç‰‡ï¼ˆconfig-dictï¼‰" class="headerlink" title="é…ç½®è¡¨åˆ†ç‰‡ï¼ˆconfig_dictï¼‰"></a>é…ç½®è¡¨åˆ†ç‰‡ï¼ˆconfig_dictï¼‰</h3><aside>
ğŸ’¡ç›´æ¥å®šä¹‰åˆ†ç‰‡å’Œåˆ†ç‰‡é”®å€¼ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œé™æ€åˆ†ç‰‡

</aside>

<p>æ¯”å¦‚ä¸ºäº†æ»¡è¶³ä¸åŒå›½å®¶å¯¹æ•°æ®å­˜å‚¨çš„è¦æ±‚ï¼Œéœ€è¦å°†æ•°æ®æŒ‰å›½å®¶è¿›è¡Œåˆ†ç‰‡ï¼Œç”±äºå›½å®¶å­—æ®µå€¼å¹¶ä¸å¤šçš„ï¼Œæˆ‘ä»¬å¯ä»¥åšç®€å•çš„æ˜ å°„ï¼šä¸­å›½&#x3D;åˆ†ç‰‡ 1ã€ç¾å›½&#x3D;åˆ†ç‰‡2ã€å…¶ä»–&#x3D;åˆ†ç‰‡3ã€‚</p>
<h3 id="å‚è€ƒï¼š"><a href="#å‚è€ƒï¼š" class="headerlink" title="å‚è€ƒï¼š"></a>å‚è€ƒï¼š</h3><p><a target="_blank" rel="noopener" href="https://shuaifeihao.top/wiki/divide_database_table/index_01_2.html">https://shuaifeihao.top/wiki/divide_database_table&#x2F;index_01_2.html</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/609637884">https://zhuanlan.zhihu.com/p/609637884</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/06/28/readme/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ran">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/06/28/readme/" class="post-title-link" itemprop="url">5åˆ†é’Ÿæ­å»ºä¸€ä¸ªhexoåšå®¢</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2023-06-28 00:00:01 / ä¿®æ”¹æ—¶é—´ï¼š00:03:16" itemprop="dateCreated datePublished" datetime="2023-06-28T00:00:01+08:00">2023-06-28</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="5-åˆ†é’Ÿæ­å»ºä¸€ä¸ª-hexo-åšå®¢"><a href="#5-åˆ†é’Ÿæ­å»ºä¸€ä¸ª-hexo-åšå®¢" class="headerlink" title="5 åˆ†é’Ÿæ­å»ºä¸€ä¸ª hexo åšå®¢"></a>5 åˆ†é’Ÿæ­å»ºä¸€ä¸ª hexo åšå®¢</h1><p>æœ€åå‘ç°ä¹‹å‰æ­å»ºçš„åšå®¢ä»“åº“æ–‡ä»¶ä¸¢å¤±äº†ï¼Œä»Šå¤©æ‰“ç®—é‡æ–°æ­å»ºä¸€ä¸ªï¼Œé¡ºå¸¦è®°å½•ä¸€ä¸‹ï¼Œæœ€å¿«åªéœ€ 5 åˆ†é’Ÿå³å¯å¥¥ã€‚</p>
<p>é¦–å…ˆè¦ç¡®ä¿å·²ç»å®‰è£…äº† hexoï¼Œæ¥ä¸‹æ¥å¼€å§‹å§ï¼</p>
<h2 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h2><p>æ–°å»ºä¸€ä¸ª blog æ–‡ä»¶å¤¹ï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure>

<p>åˆå§‹åŒ–å®Œæˆä»¥åï¼Œå¯ä»¥ç›´æ¥æŠŠåšå®¢è·‘èµ·æ¥çœ‹çœ‹æ•ˆæœï¼ˆæˆå°±æ„Ÿæ»¡æ»¡ï¼‰</p>
<h2 id="å¯åŠ¨æœåŠ¡"><a href="#å¯åŠ¨æœåŠ¡" class="headerlink" title="å¯åŠ¨æœåŠ¡"></a>å¯åŠ¨æœåŠ¡</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure>

<p>è¾“å…¥ä¸Šé¢çš„å‘½ä»¤ï¼Œæ ¹æ®æç¤ºå°±èƒ½è®¿é—®ä¸€ä¸ªåˆå§‹çš„åšå®¢ä»“åº“äº†ï¼Œç”±äºä¸ªäººæ¯”è¾ƒå–œæ¬¢ next ä¸»é¢˜çš„ç®€å•ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥åœ¨å®‰è£… next ä¸»é¢˜</p>
<h2 id="å®‰è£…-next-ä¸»é¢˜"><a href="#å®‰è£…-next-ä¸»é¢˜" class="headerlink" title="å®‰è£… next ä¸»é¢˜"></a>å®‰è£… next ä¸»é¢˜</h2><p>åœ¨ç«™ç‚¹ç›®å½•ä¸‹ clone next ä¸»é¢˜</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/theme-next/hexo-theme-next.git themes/next</span><br></pre></td></tr></table></figure>

<p>åœ¨_config.yml ä¸­å¯ç”¨ next ä¸»é¢˜å³å¯ï¼Œå†ç”¨ä¸Šé¢çš„ hexo s å°±å¯ä»¥çœ‹åˆ°äº†</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: next</span><br></pre></td></tr></table></figure>

<h2 id="è®¾ç½®ä¸­æ–‡ï¼ˆå‹å¥½çš„é…ç½®ï¼‰"><a href="#è®¾ç½®ä¸­æ–‡ï¼ˆå‹å¥½çš„é…ç½®ï¼‰" class="headerlink" title="è®¾ç½®ä¸­æ–‡ï¼ˆå‹å¥½çš„é…ç½®ï¼‰"></a>è®¾ç½®ä¸­æ–‡ï¼ˆå‹å¥½çš„é…ç½®ï¼‰</h2><p>åœ¨_config.yml é…ç½®å³å¯</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">language: zh-CN</span><br></pre></td></tr></table></figure>

<h2 id="é…ç½®-git-ä»“åº“"><a href="#é…ç½®-git-ä»“åº“" class="headerlink" title="é…ç½® git ä»“åº“"></a>é…ç½® git ä»“åº“</h2><p>åœ¨æˆ‘ä»¬å†™å®Œåšå®¢ä¹‹åï¼Œæœ‰æ—¶å€™æƒ³è¦å‘å¸ƒåˆ°ç½‘ä¸Šå»ï¼Œå°±å¯ä»¥ä½¿ç”¨ github pages çš„æ–¹å¼ã€‚è¿™é‡Œç®€å•ä»‹ç»ä¸‹å¦‚ä½•åšå®¢ä¸ git ä»“åº“å»ºç«‹è”ç³»</p>
<p>åœ¨åšå®¢çš„æ ¹ç›®å½•å®‰è£… git æ’ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>

<p>åœ¨_config.yml ä¸­é…ç½®</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: your repository url</span><br><span class="line">  branch: master</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å› ä¸ºæˆ‘æ˜¯ç”¨çš„sshçš„æ–¹å¼ï¼Œæ‰€ä»¥å°±ä¸ç”¨é…ç½®åˆ«çš„å•¦ï¼Œæ¨èç”¨sshçš„æ–¹å¼å»pushä»£ç </span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="éƒ¨ç½²-amp-å‘å¸ƒ-amp-åˆ†äº«"><a href="#éƒ¨ç½²-amp-å‘å¸ƒ-amp-åˆ†äº«" class="headerlink" title="éƒ¨ç½²&amp;å‘å¸ƒ&amp;åˆ†äº«"></a>éƒ¨ç½²&amp;å‘å¸ƒ&amp;åˆ†äº«</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo deploy</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æå®šï¼</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ æƒ³è¦</p>
<h2 id="å†™æ–‡ç« "><a href="#å†™æ–‡ç« " class="headerlink" title="å†™æ–‡ç« "></a>å†™æ–‡ç« </h2><ul>
<li>åˆ›å»ºä¸€ç¯‡æ–°çš„æ–‡ç« ï¼Œè¾“å…¥å‘½ä»¤åï¼Œåœ¨ source ä¸‹çš„_posts æ–‡ä»¶ç»§ç»­å®Œæˆå¤§ä½œå°±å¥½äº†</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo n title</span><br></pre></td></tr></table></figure>

<ul>
<li><p>å¯¼å…¥ç°æœ‰çš„ md æ ¼å¼çš„æ–‡ä»¶</p>
<ol>
<li>åœ¨ md æ–‡ä»¶çš„å¤´éƒ¨å†™å…¥</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: your titel</span><br><span class="line">date: 2022-07-10 12:35:53</span><br><span class="line">tags: sql</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>æ”¾å…¥ source&#x2F;_posts&#x2F;ä¸‹å³å¯å•¦</li>
</ol>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/06/27/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ran">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/06/27/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2023-06-27 15:26:32" itemprop="dateCreated datePublished" datetime="2023-06-27T15:26:32+08:00">2023-06-27</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/06/26/%E6%8E%A2%E7%B4%A2AQS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ran">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/06/26/%E6%8E%A2%E7%B4%A2AQS/" class="post-title-link" itemprop="url">æ¢ç´¢AQS</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2023-06-26 22:38:10 / ä¿®æ”¹æ—¶é—´ï¼š22:46:50" itemprop="dateCreated datePublished" datetime="2023-06-26T22:38:10+08:00">2023-06-26</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="AQS-1"><a href="#AQS-1" class="headerlink" title="AQS.1"></a>AQS.1</h1><p>ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹</p>
<p>å®¹å™¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Box</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">maxSize</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”Ÿäº§è€…</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”Ÿäº§è€…</span></span><br><span class="line"><span class="comment"> * ä»»åŠ¡:è®©count+1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Producer</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> Box box;</span><br><span class="line"></span><br><span class="line">    Producer(Box box) &#123;</span><br><span class="line">        <span class="built_in">this</span>.box = box;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                produce();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">produce</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (box) &#123;</span><br><span class="line">            <span class="keyword">while</span> (box.count &gt;= box.maxSize) &#123;</span><br><span class="line">                box.wait();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;ç”Ÿäº§çº¿ç¨‹å: &quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;,ç”Ÿäº§å‰ count: &quot;</span> + box.count);</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            box.count++;</span><br><span class="line">            System.out.println(<span class="string">&quot;ç”Ÿäº§çº¿ç¨‹å: &quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;,ç”Ÿäº§å®Œæ¯•å count: &quot;</span> + box.count);</span><br><span class="line">            <span class="comment">// å”¤é†’æ‰€æœ‰ç­‰å¾…çš„çº¿ç¨‹ï¼ˆåŒ…æ‹¬ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ï¼‰</span></span><br><span class="line">            box.notifyAll();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¶ˆè´¹è€…</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¶ˆè´¹è€…</span></span><br><span class="line"><span class="comment"> * ä»»åŠ¡:è®©count-1,å¦‚æœcount&lt;=0 åˆ™ç­‰å¾…</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Consumer</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> Box box;</span><br><span class="line"></span><br><span class="line">    Consumer(Box box) &#123;</span><br><span class="line">        <span class="built_in">this</span>.box = box;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">                consumer();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">consumer</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (box) &#123;</span><br><span class="line">            <span class="keyword">while</span> (box.count &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                box.wait();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ¶ˆè´¹çº¿ç¨‹å: &quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;,æ¶ˆè´¹ä¹‹å‰ count: &quot;</span> + box.count);</span><br><span class="line">            Thread.sleep(<span class="number">1500</span>);</span><br><span class="line">            box.count = box.count - <span class="number">1</span>;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ¶ˆè´¹çº¿ç¨‹å: &quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;,æ¶ˆè´¹å®Œæ¯•å count: &quot;</span> + box.count);</span><br><span class="line">            box.notifyAll();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œç»“æœ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">Box</span> <span class="variable">box</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Box</span>();</span><br><span class="line">        <span class="type">Consumer</span> <span class="variable">consumer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Consumer</span>(box);</span><br><span class="line">        consumer.start();</span><br><span class="line"></span><br><span class="line">        <span class="type">Producer</span> <span class="variable">producer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Producer</span>(box);</span><br><span class="line">        producer.start();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">æ‰§è¡Œç»“æœ</span><br><span class="line">ç”Ÿäº§çº¿ç¨‹å: Thread-<span class="number">1</span>,ç”Ÿäº§å‰ count: <span class="number">0</span></span><br><span class="line">ç”Ÿäº§çº¿ç¨‹å: Thread-<span class="number">1</span>,ç”Ÿäº§å®Œæ¯•å count: <span class="number">1</span></span><br><span class="line">æ¶ˆè´¹çº¿ç¨‹å: Thread-<span class="number">0</span>,æ¶ˆè´¹ä¹‹å‰ count: <span class="number">1</span></span><br><span class="line">æ¶ˆè´¹çº¿ç¨‹å: Thread-<span class="number">0</span>,æ¶ˆè´¹å®Œæ¯•å count: <span class="number">0</span></span><br><span class="line">ç”Ÿäº§çº¿ç¨‹å: Thread-<span class="number">1</span>,ç”Ÿäº§å‰ count: <span class="number">0</span></span><br><span class="line">ç”Ÿäº§çº¿ç¨‹å: Thread-<span class="number">1</span>,ç”Ÿäº§å®Œæ¯•å count: <span class="number">1</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šæ˜¯ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹çš„ç®€å•å®ç°ã€‚ä»£ç ä¸é•¿ï¼Œä½†åˆå¼•å‡ºäº†æ–°çš„é—®é¢˜ã€‚</p>
<ol>
<li>ä¸ºä»€ä¹ˆ wait()å’Œ notify()å¿…é¡»å†™åœ¨ synchronized é‡Œå‘¢ï¼Ÿ</li>
</ol>
<p>å‚è€ƒï¼š*<strong>*Lost Wake-Up Problem(**</strong><a target="_blank" rel="noopener" href="https://www.cnblogs.com/myseries/p/13903051.html">https://www.cnblogs.com/myseries/p/13903051.html</a>*<strong>*)**</strong></p>
<ol>
<li>ç”¨ notifyAll()å”¤é†’çº¿ç¨‹ï¼Œä½†æ˜¯æ— æ³•å”¤é†’æŒ‡å®šçš„çº¿ç¨‹ï¼Œè¿™è¦æ€ä¹ˆè§£å†³å‘¢</li>
</ol>
<h2 id="LockSupport"><a href="#LockSupport" class="headerlink" title="LockSupport"></a>LockSupport</h2><p>LockSupport ç”¨æ¥åˆ›å»ºé”å’Œå…¶ä»–åŒæ­¥ç±»çš„åŸºæœ¬çº¿ç¨‹é˜»å¡åŸè¯­ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå½“è°ƒç”¨ LockSupport.park æ—¶ï¼Œè¡¨ç¤ºå½“å‰çº¿ç¨‹å°†ä¼šç­‰å¾…ï¼Œç›´è‡³è·å¾—è®¸å¯ï¼Œå½“è°ƒç”¨ LockSupport.unpark æ—¶ï¼Œå¿…é¡»æŠŠç­‰å¾…è·å¾—è®¸å¯çš„çº¿ç¨‹ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ï¼Œå¥½è®©æ­¤çº¿ç¨‹ç»§ç»­è¿è¡Œã€‚åŒæ—¶ LockSupport ä¹Ÿæ˜¯ AQS æ¡†æ¶çš„åŸºç¡€ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LockSupportTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å”¤é†’æŒ‡å®šçº¿ç¨‹çš„demo</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;t1å³å°†é˜»å¡&quot;</span>);</span><br><span class="line">            LockSupport.park();</span><br><span class="line">            System.out.println(<span class="string">&quot;t1è¢«å”¤é†’&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;t2å”¤é†’çº¿ç¨‹t1&quot;</span>);</span><br><span class="line">            LockSupport.unpark(t1);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;t3å³å°†é˜»å¡&quot;</span>);</span><br><span class="line">            LockSupport.park();</span><br><span class="line">        &#125;);</span><br><span class="line">        t3.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t1.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œç»“æœ</span></span><br><span class="line">t3å³å°†é˜»å¡</span><br><span class="line">t2å”¤é†’çº¿ç¨‹t1</span><br><span class="line">t1å³å°†é˜»å¡</span><br><span class="line">t1è¢«å”¤é†’</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h2 id="ReentrantLock"><a href="#ReentrantLock" class="headerlink" title="**ReentrantLock**"></a>*<strong>*ReentrantLock**</strong></h2><p>å¯é‡å…¥é”ï¼Œç”¨ä¸€å¥è¯æ¥è§£é‡Šå°±æ˜¯ã€‚ä¸€ä¸ªå·²ç»æ‹¿åˆ°äº†é”çš„çº¿ç¨‹ï¼Œå¯ä»¥å†æ¬¡æ‹¿åˆ°è¿™ä¸ªé”ï¼Œè€Œåˆ«çš„çº¿ç¨‹æ˜¯æ‹¿ä¸åˆ°çš„ã€‚</p>
<p>****ReentrantLock çš„****å†…éƒ¨ç»“æ„</p>
<p><img src="/../img/%E6%9E%B6%E6%9E%84.png" alt="Untitled"></p>
<p>AQS ä¸­æœ‰å‡ ä¸ªå…³é”®çš„å±æ€§ exclusiveOwnerThreadï¼Œheadï¼Œtailã€‚ä»–ä»¬åˆ†åˆ«æ˜¯ exclusiveOwnerThreadï¼šå½“å‰ç‹¬å é”çš„çº¿ç¨‹</p>
<p>headï¼šAQS åº•å±‚åŒå‘é“¾è¡¨çš„å¤´èŠ‚ç‚¹</p>
<p>tailï¼šAQS åº•å±‚åŒå‘é“¾è¡¨çš„å°¾èŠ‚ç‚¹</p>
<p>å‡è®¾ä¸€ä¸ªåœºæ™¯ï¼šæœ‰ä¸€ä¸ªçº¿ç¨‹å·²ç»è·å¾—äº†å¯é‡å…¥é”ï¼Œè¿™æ—¶æ°å·§æœ‰å¦ä¸€ä¸ªçº¿ç¨‹ï¼ˆåä¸º Aï¼‰ä¹Ÿæƒ³è·å–è¿™ä¸ªé”ï¼Œé‚£ AQS æ˜¯æ€ä¹ˆåšçš„å‘¢ï¼Ÿ</p>
<h3 id="AQS-æ„é€ åŒå‘é“¾è¡¨"><a href="#AQS-æ„é€ åŒå‘é“¾è¡¨" class="headerlink" title="AQS æ„é€ åŒå‘é“¾è¡¨"></a>AQS æ„é€ åŒå‘é“¾è¡¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Creates and enqueues node for current thread and given mode.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> mode Node.EXCLUSIVE for exclusive, Node.SHARED for shared</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> the new node</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> Node <span class="title function_">addWaiter</span><span class="params">(Node mode)</span> &#123;</span><br><span class="line">    <span class="type">Node</span> <span class="variable">node</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(Thread.currentThread(), mode);</span><br><span class="line">    <span class="comment">// Try the fast path of enq; backup to full enq on failure</span></span><br><span class="line">    <span class="type">Node</span> <span class="variable">pred</span> <span class="operator">=</span> tail;</span><br><span class="line">    <span class="keyword">if</span> (pred != <span class="literal">null</span>) &#123;</span><br><span class="line">        node.prev = pred;</span><br><span class="line">        <span class="keyword">if</span> (compareAndSetTail(pred, node)) &#123;</span><br><span class="line">            pred.next = node;</span><br><span class="line">            <span class="keyword">return</span> node;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    enq(node);</span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">----</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Inserts node into queue, initializing if necessary. See picture above.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> node the node to insert</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> node&#x27;s predecessor</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> Node <span class="title function_">enq</span><span class="params">(<span class="keyword">final</span> Node node)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">t</span> <span class="operator">=</span> tail;</span><br><span class="line">        <span class="keyword">if</span> (t == <span class="literal">null</span>) &#123; <span class="comment">// Must initialize</span></span><br><span class="line">            <span class="keyword">if</span> (compareAndSetHead(<span class="keyword">new</span> <span class="title class_">Node</span>()))</span><br><span class="line">                tail = head;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            node.prev = t;</span><br><span class="line">            <span class="keyword">if</span> (compareAndSetTail(t, node)) &#123;</span><br><span class="line">                t.next = node;</span><br><span class="line">                <span class="keyword">return</span> t;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>é¦–å…ˆï¼Œå½“ç¬¬ä¸€æ¬¡è¿›å…¥åˆ° addWaiter æ—¶ï¼ŒAQS çš„ tail èŠ‚ç‚¹ä¸ºç©ºï¼Œæ‰€ä»¥ä¼šè¿›å…¥åˆ° enq ä¸­ã€‚</li>
<li>åœ¨ enq ä¸­ï¼Œå…ˆåˆ¤æ–­ tail æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºï¼Œé‚£ä¹ˆå°±è¦å…ˆåˆå§‹åŒ– AQS çš„é˜Ÿåˆ—ï¼Œä¹Ÿå°±æ˜¯ä¼šå…ˆåˆå§‹åŒ–å‡ºä¸€ä¸ªç©ºçš„å¤´ç»“ç‚¹ã€‚ï¼ˆåŒå‘é“¾è¡¨å¸¦ä¸€ä¸ªç©ºçš„å¤´æŒ‡é’ˆæœ‰å¾ˆå¤šå¥½å¤„ï¼Œä¹‹ä¸€å°±æ˜¯å¯ä»¥é¿å…ç©ºæŒ‡é’ˆï¼‰</li>
<li>æœ€åæŠŠå…¥å‚ node(å½“å‰å¾…è·å¾—é”çš„çº¿ç¨‹æ‰€å°è£…çš„ node)ç”¨å°¾æ’æ³•ï¼Œæ’å…¥åˆ°è¿™ä¸ªåŒå‘é˜Ÿåˆ—å³å¯ã€‚</li>
</ol>
<p><img src="/../img/AQS.png" alt="Untitled"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/01/22/mybatis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ran">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/01/22/mybatis/" class="post-title-link" itemprop="url">mybatisçš„æºç å°è®°ï¼ˆ1ï¼‰</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2023-01-22 21:54:53 / ä¿®æ”¹æ—¶é—´ï¼š21:54:34" itemprop="dateCreated datePublished" datetime="2023-01-22T21:54:53+08:00">2023-01-22</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="mybatisçš„æºç å°è®°ï¼ˆ1ï¼‰"><a href="#mybatisçš„æºç å°è®°ï¼ˆ1ï¼‰" class="headerlink" title="mybatisçš„æºç å°è®°ï¼ˆ1ï¼‰"></a>mybatisçš„æºç å°è®°ï¼ˆ1ï¼‰</h1><h2 id="å¯¹è±¡ç®€ä»‹"><a href="#å¯¹è±¡ç®€ä»‹" class="headerlink" title="å¯¹è±¡ç®€ä»‹"></a>å¯¹è±¡ç®€ä»‹</h2><blockquote>
<p>configurationï¼šä¸€ä¸ªåºå¤§çš„å…¨å±€é…ç½®</p>
</blockquote>
<blockquote>
<p>SqlSessionï¼šäº†åœ¨æ•°æ®åº“æ‰§è¡Œ SQL å‘½ä»¤æ‰€éœ€çš„æ‰€æœ‰æ–¹æ³•.</p>
</blockquote>
<blockquote>
<p>SqlSessionFactoryï¼šæ„é€ SqlSessionçš„å·¥å‚</p>
</blockquote>
<blockquote>
<p>MapperRegistryï¼šgetMapperæ˜¯ä»configurationä¸‹çš„mapperRegistryè·å–çš„ã€‚</p>
</blockquote>
<h2 id="æ‰§è¡Œæµç¨‹"><a href="#æ‰§è¡Œæµç¨‹" class="headerlink" title="æ‰§è¡Œæµç¨‹"></a>æ‰§è¡Œæµç¨‹</h2><ul>
<li>ä»mybatisè·å–mapperå¼€å§‹</li>
</ul>
<p>åŸå§‹çš„ä½¿ç”¨mybatisçš„æ–¹å¼æ˜¯é¦–å…ˆæ„å»ºä¸€ä¸ªSqlSessionï¼Œæ¥ç€ä»SqlSessionä¸­è·å–mapperã€‚æœ€åæ‰§è¡Œmapperä¸­çš„æ–¹æ³•å³å¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_SqlSessionFactory</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">// 1. ä»SqlSessionFactoryä¸­è·å–SqlSession</span></span><br><span class="line">    <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(Resources.getResourceAsReader(<span class="string">&quot;mybatis-config-datasource.xml&quot;</span>));</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. è·å–æ˜ å°„å™¨å¯¹è±¡</span></span><br><span class="line">    <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(UserDao.class);</span><br><span class="line"></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userDao.queryUserInfoById(<span class="number">1L</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆä»SqlSessionä¸­è·å–çš„mapperåˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Œæ¥ä¸‹æ¥å°±æ¥ä¸€æ¢ç©¶ç«Ÿã€‚</p>
<p>è¿›å…¥DefaultSqlSessionï¼ˆSqlSessionçš„é»˜è®¤å®ç°ï¼‰çš„getMapperæ–¹æ³•ï¼Œå¯ä»¥å‘ç°æœ€ç»ˆæ˜¯è¿›å…¥çš„configurationä¸‹çš„mapperRegistry.getMapper()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MapperRegistry</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Configuration config;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Map&lt;Class&lt;?&gt;, MapperProxyFactory&lt;?&gt;&gt; knownMappers = <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MapperRegistry</span><span class="params">(Configuration config)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.config = config;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; T <span class="title function_">getMapper</span><span class="params">(Class&lt;T&gt; type, SqlSession sqlSession)</span> &#123;</span><br><span class="line">        MapperProxyFactory&lt;T&gt; mapperProxyFactory = (MapperProxyFactory)<span class="built_in">this</span>.knownMappers.get(type);</span><br><span class="line">        <span class="keyword">if</span> (mapperProxyFactory == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BindingException</span>(<span class="string">&quot;Type &quot;</span> + type + <span class="string">&quot; is not known to the MapperRegistry.&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> mapperProxyFactory.newInstance(sqlSession);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception var5) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BindingException</span>(<span class="string">&quot;Error getting mapper instance. Cause: &quot;</span> + var5, var5);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>mapperRegistryä¸­æœ‰ä¸€ä¸ªå˜é‡å«knownMappersï¼Œè¿™é‡Œæ˜¯ä»¥mapperçš„classå¯¹è±¡ä¸ºkeyï¼Œä»¥ç”Ÿæˆmapperå¯¹è±¡ï¼ˆä¹Ÿå°±æ˜¯MapperProxyï¼‰çš„å·¥å‚ä¸ºvalueçš„ä¸€ä¸ªHashMapã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä¸€å¥è¯æ€»ç»“mybatisè·å–mapperçš„è¿‡ç¨‹å°±æ˜¯ï¼šæ ¹æ®classå¯¹è±¡ï¼Œä»mapperRegistryä¸­è·å–mapperçš„ä»£ç†å¯¹è±¡ï¼Œä¸”æ˜¯æ¯æ¬¡è·å–éƒ½ä¼šåˆ›å»ºæ–°çš„ä»£ç†å¯¹è±¡ï¼Œè¿™ä¹Ÿå°è¯äº†å®˜ç½‘æ‰€è¯´mapperçš„ä½œç”¨åŸŸæ˜¯åœ¨æ–¹æ³•çº§åˆ«çš„ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/01/22/mybatis.2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ran">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/01/22/mybatis.2/" class="post-title-link" itemprop="url">mybatisçš„æºç å°è®°ï¼ˆ2ï¼‰</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2023-01-22 21:54:53" itemprop="dateCreated datePublished" datetime="2023-01-22T21:54:53+08:00">2023-01-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2023-02-06 14:03:23" itemprop="dateModified" datetime="2023-02-06T14:03:23+08:00">2023-02-06</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="mybatisçš„æºç å°è®°ï¼ˆ2ï¼‰"><a href="#mybatisçš„æºç å°è®°ï¼ˆ2ï¼‰" class="headerlink" title="mybatisçš„æºç å°è®°ï¼ˆ2ï¼‰"></a>mybatisçš„æºç å°è®°ï¼ˆ2ï¼‰</h1><h2 id="mapper-xxx"><a href="#mapper-xxx" class="headerlink" title="mapper.xxx()"></a>mapper.xxx()</h2><p>é¦–å…ˆè¿˜æ˜¯ä»è¿™æ®µç®€å•çš„ä½¿ç”¨åœºæ™¯è¯´èµ·ï¼Œä¸Šä¸€ç¯‡æ–‡ç« ç®€å•æè¿°äº†ä¸‹sqlSession.getMapper()çš„å…·ä½“å®ç°ï¼Œé‚£ä¹ˆè·å–mapperä¹‹åçš„æŸ¥è¯¢é€»è¾‘åˆæ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_SqlSessionFactory</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">// 1. ä»SqlSessionFactoryä¸­è·å–SqlSession</span></span><br><span class="line">    <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(Resources.getResourceAsReader(<span class="string">&quot;mybatis-config-datasource.xml&quot;</span>));</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. è·å–æ˜ å°„å™¨å¯¹è±¡</span></span><br><span class="line">    <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(UserDao.class);</span><br><span class="line"></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userDao.queryUserInfoById(<span class="number">1L</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¼—æ‰€å‘¨çŸ¥ï¼Œæ¥å£æ˜¯æ²¡æœ‰æ–¹æ³•ä½“çš„ã€‚æ‰€ä»¥ç›´æ¥æ¥åˆ°MapperProxy#invoke</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (Object.class.equals(method.getDeclaringClass())) &#123;</span><br><span class="line">      <span class="keyword">return</span> method.invoke(<span class="built_in">this</span>, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.isDefaultMethod(method)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.invokeDefaultMethod(proxy, method, args);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (Throwable var5) &#123;</span><br><span class="line">    <span class="keyword">throw</span> ExceptionUtil.unwrapThrowable(var5);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="type">MapperMethod</span> <span class="variable">mapperMethod</span> <span class="operator">=</span> <span class="built_in">this</span>.cachedMapperMethod(method);</span><br><span class="line">  <span class="comment">// äº¤ç»™å°è£…çš„mapperMethodå»æ‰§è¡Œ</span></span><br><span class="line">  <span class="keyword">return</span> mapperMethod.execute(<span class="built_in">this</span>.sqlSession, args);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>MapperMethodæ ¹æ®SqlCommandæ ¹æ®å»åˆ†å‘å…·ä½“çš„æ‰§è¡Œï¼Œå…¶å®æœ€åè¿˜æ˜¯æŠŠæ–¹æ³•è½¬äº¤ç»™äº†sqlSessionå»å¤„ç†</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Object <span class="title function_">execute</span><span class="params">(SqlSession sqlSession, Object[] args)</span> &#123;</span><br><span class="line">  Object param;</span><br><span class="line">  Object result;</span><br><span class="line">  <span class="keyword">switch</span>(<span class="built_in">this</span>.command.getType()) &#123;</span><br><span class="line">    <span class="keyword">case</span> INSERT:</span><br><span class="line">      param = <span class="built_in">this</span>.method.convertArgsToSqlCommandParam(args);</span><br><span class="line">      result = <span class="built_in">this</span>.rowCountResult(sqlSession.insert(<span class="built_in">this</span>.command.getName(), param));</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> UPDATE:</span><br><span class="line">      param = <span class="built_in">this</span>.method.convertArgsToSqlCommandParam(args);</span><br><span class="line">      result = <span class="built_in">this</span>.rowCountResult(sqlSession.update(<span class="built_in">this</span>.command.getName(), param));</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> DELETE:</span><br><span class="line">      param = <span class="built_in">this</span>.method.convertArgsToSqlCommandParam(args);</span><br><span class="line">      result = <span class="built_in">this</span>.rowCountResult(sqlSession.delete(<span class="built_in">this</span>.command.getName(), param));</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> SELECT:</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.method.returnsVoid() &amp;&amp; <span class="built_in">this</span>.method.hasResultHandler()) &#123;</span><br><span class="line">        <span class="built_in">this</span>.executeWithResultHandler(sqlSession, args);</span><br><span class="line">        result = <span class="literal">null</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">this</span>.method.returnsMany()) &#123;</span><br><span class="line">        result = <span class="built_in">this</span>.executeForMany(sqlSession, args);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">this</span>.method.returnsMap()) &#123;</span><br><span class="line">        result = <span class="built_in">this</span>.executeForMap(sqlSession, args);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">this</span>.method.returnsCursor()) &#123;</span><br><span class="line">        result = <span class="built_in">this</span>.executeForCursor(sqlSession, args);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        param = <span class="built_in">this</span>.method.convertArgsToSqlCommandParam(args);</span><br><span class="line">        <span class="comment">// åœ¨è¿™é‡Œäº¤ç»™sqlSession</span></span><br><span class="line">        result = sqlSession.selectOne(<span class="built_in">this</span>.command.getName(), param);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> FLUSH:</span><br><span class="line">      result = sqlSession.flushStatements();</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BindingException</span>(<span class="string">&quot;Unknown execution method for: &quot;</span> + <span class="built_in">this</span>.command.getName());</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>SqlSessionæŠŠä¸æ•°æ®åº“çš„å¤„ç†é€»è¾‘éƒ½äº¤ç»™äº†Executorï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯è§£è€¦ï¼Œé¿å…SqlSessionä¸­å¤ªå¤šé€»è¾‘ï¼Œä»è€Œå¯¼è‡´ç±»æœ¬èº«éå¸¸å¤æ‚ï¼Œä¸æ˜“äºæ‹“å±•ã€‚</p>
<p>ä¸ºäº†é˜…è¯»çš„æµç¨‹ï¼Œæ‰€ä»¥è¿™é‡ŒåªæåŠExecutorä¸­çš„ä¸€ç§å®ç°ï¼šSimpleExecutorï¼Œå¹¶ä¸”å…ˆéšè—ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„éƒ¨åˆ†é€»è¾‘ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> &lt;E&gt; List&lt;E&gt; <span class="title function_">selectList</span><span class="params">(String statement, Object parameter, RowBounds rowBounds)</span> &#123;</span><br><span class="line">  List var5;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="type">MappedStatement</span> <span class="variable">ms</span> <span class="operator">=</span> <span class="built_in">this</span>.configuration.getMappedStatement(statement);</span><br><span class="line">    <span class="comment">// è½¬äº¤ç»™executorå»å¤„ç†ï¼Œé»˜è®¤å®ç°æ˜¯SimpleExecutor</span></span><br><span class="line">    var5 = <span class="built_in">this</span>.executor.query(ms, <span class="built_in">this</span>.wrapCollection(parameter), rowBounds, Executor.NO_RESULT_HANDLER);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (Exception var9) &#123;</span><br><span class="line">    <span class="keyword">throw</span> ExceptionFactory.wrapException(<span class="string">&quot;Error querying database.  Cause: &quot;</span> + var9, var9);</span><br><span class="line">  &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    ErrorContext.instance().reset();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> var5;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸€èˆ¬æˆ‘ä»¬ä½¿ç”¨JDBCæŸ¥è¯¢è¯­å¥æ­¥éª¤å°±æ˜¯1.è·å–é“¾æ¥ï¼Œ2.è®¾ç½®sqlï¼Œ3.è®¾ç½®å‚æ•°ï¼Œ4.æŸ¥è¯¢ï¼Œ5.å°è£…ç»“æœé›†ï¼Œæ‰€ä»¥å…¶å®Executorä¹Ÿå°±æ˜¯å¸®åŠ©æˆ‘ä»¬å®Œæˆäº†è¿™äº›æ­¥éª¤ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> &lt;E&gt; List&lt;E&gt; <span class="title function_">query</span><span class="params">(MappedStatement ms, Object parameter, RowBounds rowBounds, ResultHandler resultHandler)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">  <span class="comment">//è·å–boundSql</span></span><br><span class="line">    <span class="type">BoundSql</span> <span class="variable">boundSql</span> <span class="operator">=</span> ms.getBoundSql(parameter);</span><br><span class="line">    <span class="type">CacheKey</span> <span class="variable">key</span> <span class="operator">=</span> <span class="built_in">this</span>.createCacheKey(ms, parameter, rowBounds, boundSql);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.query(ms, parameter, rowBounds, resultHandler, key, boundSql);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> &lt;E&gt; List&lt;E&gt; <span class="title function_">doQuery</span><span class="params">(MappedStatement ms, Object parameter, RowBounds rowBounds, ResultHandler resultHandler, BoundSql boundSql)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">    <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    List var9;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">//è·å–é“¾æ¥</span></span><br><span class="line">        <span class="type">Configuration</span> <span class="variable">configuration</span> <span class="operator">=</span> ms.getConfiguration();</span><br><span class="line">      <span class="comment">//åˆ›å»ºä¸€ä¸ªè¯­å¥å¤„ç†å™¨</span></span><br><span class="line">        <span class="type">StatementHandler</span> <span class="variable">handler</span> <span class="operator">=</span> configuration.newStatementHandler(<span class="built_in">this</span>.wrapper, ms, parameter, rowBounds, resultHandler, boundSql);</span><br><span class="line">      <span class="comment">// å‡†å¤‡è¯­å¥ï¼Œè®¾ç½®å‚æ•°</span></span><br><span class="line">        stmt = <span class="built_in">this</span>.prepareStatement(handler, ms.getStatementLog());</span><br><span class="line">        var9 = handler.query(stmt, resultHandler);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.closeStatement(stmt);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> var9;</span><br><span class="line">&#125;	</span><br></pre></td></tr></table></figure>

<h2 id="å¤„ç†æµç¨‹è§£æ"><a href="#å¤„ç†æµç¨‹è§£æ" class="headerlink" title="å¤„ç†æµç¨‹è§£æ"></a>å¤„ç†æµç¨‹è§£æ</h2><p>â€‹	<img src="/../../../../../Downloads/statement.png" alt="statement"></p>
<h3 id="åˆ›å»ºStatementHandler"><a href="#åˆ›å»ºStatementHandler" class="headerlink" title="åˆ›å»ºStatementHandler"></a>åˆ›å»ºStatementHandler</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">//åˆ›å»ºè¯­å¥å¤„ç†å™¨</span></span><br><span class="line"><span class="keyword">public</span> StatementHandler <span class="title function_">newStatementHandler</span><span class="params">(Executor executor, MappedStatement mappedStatement, Object parameterObject, RowBounds rowBounds, ResultHandler resultHandler, BoundSql boundSql)</span> &#123;</span><br><span class="line">    <span class="comment">//åˆ›å»ºè·¯ç”±é€‰æ‹©è¯­å¥å¤„ç†å™¨</span></span><br><span class="line">    <span class="type">StatementHandler</span> <span class="variable">statementHandler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RoutingStatementHandler</span>(executor, mappedStatement, parameterObject, rowBounds, resultHandler, boundSql);</span><br><span class="line">    <span class="comment">//æ’ä»¶åœ¨è¿™é‡Œæ’å…¥</span></span><br><span class="line">    statementHandler = (StatementHandler) interceptorChain.pluginAll(statementHandler);</span><br><span class="line">    <span class="keyword">return</span> statementHandler;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œåˆ›å»ºRoutingStatementHandlerï¼Œæœ¬è´¨ä¸Šæ˜¯æ ¹æ®statementTypeåˆ›å»ºä¸åŒç±»å‹çš„ä»£ç†ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">RoutingStatementHandler</span><span class="params">(Executor executor, MappedStatement ms, Object parameter, RowBounds rowBounds, ResultHandler resultHandler, BoundSql boundSql)</span> &#123;</span><br><span class="line">  <span class="comment">//æ ¹æ®è¯­å¥ç±»å‹ï¼Œå§”æ´¾åˆ°ä¸åŒçš„è¯­å¥å¤„ç†å™¨(STATEMENT|PREPARED|CALLABLE)</span></span><br><span class="line">  <span class="keyword">switch</span> (ms.getStatementType()) &#123;</span><br><span class="line">    <span class="keyword">case</span> STATEMENT:</span><br><span class="line">      delegate = <span class="keyword">new</span> <span class="title class_">SimpleStatementHandler</span>(executor, ms, parameter, rowBounds, resultHandler, boundSql);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> PREPARED:</span><br><span class="line">      delegate = <span class="keyword">new</span> <span class="title class_">PreparedStatementHandler</span>(executor, ms, parameter, rowBounds, resultHandler, boundSql);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> CALLABLE:</span><br><span class="line">      delegate = <span class="keyword">new</span> <span class="title class_">CallableStatementHandler</span>(executor, ms, parameter, rowBounds, resultHandler, boundSql);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ExecutorException</span>(<span class="string">&quot;Unknown statement type: &quot;</span> + ms.getStatementType());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="StatementHandlerçš„ç»§æ‰¿å…³ç³»"><a href="#StatementHandlerçš„ç»§æ‰¿å…³ç³»" class="headerlink" title="StatementHandlerçš„ç»§æ‰¿å…³ç³»"></a>StatementHandlerçš„ç»§æ‰¿å…³ç³»</h3><p>![image-20230130220842307](..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230130220842307.png)</p>
<p>å…¶ä¸­ä¸‰ç§å…·ä½“å®ç°åˆ†åˆ«å¯¹åº”</p>
<blockquote>
<p>SimpleStatementHandler ç®€å•è¯­å¥å¤„ç†å™¨(STATEMENT)</p>
<p>PreparedStatementHandler é¢„å¤„ç†è¯­å¥å¤„ç†å™¨(PREPARED)</p>
<p>CallableStatementHandler å­˜å‚¨è¿‡ç¨‹è¯­å¥å¤„ç†å™¨(CALLABLE)</p>
</blockquote>
<p>æ¥ä¸‹æ¥æ˜¯è°ƒç”¨resultHandlerå¤„ç†è¿”å›çš„ç»“æœé›†</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">PreparedStatementHandler</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> &lt;E&gt; List&lt;E&gt; <span class="title function_">query</span><span class="params">(Statement statement, ResultHandler resultHandler)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> (PreparedStatement)statement;</span><br><span class="line">        ps.execute();</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.resultSetHandler.handleResultSets(ps);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä¸€å¥è¯æ€»ç»“mapperçš„æ‰§è¡Œæµç¨‹å°±æ˜¯ï¼Œmapperçš„ä»£ç†ä¼šå»é€šè¿‡sqlSessionæ‰¾åˆ°executoræ¥æ‰§è¡Œå¯¹åº”çš„sqlï¼Œç„¶ååœ¨é€šè¿‡resultHandleræ¥å°è£…è¿”å›çš„ç»“æœé›†ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/19/Java%E5%80%BC%E4%BC%A0%E9%80%92%E8%BF%98%E6%98%AF%E5%BC%95%E7%94%A8%E4%BC%A0%E9%80%92%E7%9A%84%E5%AE%9E%E8%B7%B5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ran">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/19/Java%E5%80%BC%E4%BC%A0%E9%80%92%E8%BF%98%E6%98%AF%E5%BC%95%E7%94%A8%E4%BC%A0%E9%80%92%E7%9A%84%E5%AE%9E%E8%B7%B5/" class="post-title-link" itemprop="url">Javaå€¼ä¼ é€’è¿˜æ˜¯å¼•ç”¨ä¼ é€’çš„å®è·µ</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-08-19 22:07:00 / ä¿®æ”¹æ—¶é—´ï¼š22:07:41" itemprop="dateCreated datePublished" datetime="2022-08-19T22:07:00+08:00">2022-08-19</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Javaå€¼ä¼ é€’è¿˜æ˜¯å¼•ç”¨ä¼ é€’çš„å®è·µ"><a href="#Javaå€¼ä¼ é€’è¿˜æ˜¯å¼•ç”¨ä¼ é€’çš„å®è·µ" class="headerlink" title="Javaå€¼ä¼ é€’è¿˜æ˜¯å¼•ç”¨ä¼ é€’çš„å®è·µ"></a>Javaå€¼ä¼ é€’è¿˜æ˜¯å¼•ç”¨ä¼ é€’çš„å®è·µ</h1><p>é¦–å…ˆçœ‹ä¸‹å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’çš„å®šä¹‰</p>
<blockquote>
<ul>
<li><strong>Pass by Value</strong>: The method parameter values are copied to another variable and then the copied object is passed, thatâ€™s why itâ€™s called pass by value.</li>
<li>å€¼ä¼ é€’ï¼ˆpass by valueï¼‰æ˜¯æŒ‡åœ¨è°ƒç”¨å‡½æ•°æ—¶å°†å®é™…å‚æ•°å¤åˆ¶ä¸€ä»½ä¼ é€’åˆ°å‡½æ•°ä¸­ï¼Œè¿™æ ·åœ¨å‡½æ•°ä¸­å¦‚æœå¯¹å‚æ•°è¿›è¡Œä¿®æ”¹ï¼Œå°†ä¸ä¼šå½±å“åˆ°å®é™…å‚æ•°ã€‚</li>
<li><strong>Pass by Reference</strong>: An alias or reference to the actual parameter is passed to the method, thatâ€™s why itâ€™s called pass by reference.</li>
<li>å¼•ç”¨ä¼ é€’ï¼ˆpass by referenceï¼‰æ˜¯æŒ‡åœ¨è°ƒç”¨å‡½æ•°æ—¶å°†å®é™…å‚æ•°çš„åœ°å€ç›´æ¥ä¼ é€’åˆ°å‡½æ•°ä¸­ï¼Œé‚£ä¹ˆåœ¨å‡½æ•°ä¸­å¯¹å‚æ•°æ‰€è¿›è¡Œçš„ä¿®æ”¹ï¼Œå°†å½±å“åˆ°å®é™…å‚æ•°ã€‚</li>
</ul>
</blockquote>
<h2 id="å®è·µä»£ç "><a href="#å®è·µä»£ç " class="headerlink" title="å®è·µä»£ç "></a>å®è·µä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@org</span>.junit.Test</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_update</span><span class="params">()</span>&#123;</span><br><span class="line">      <span class="type">int</span> i= <span class="number">0</span>;</span><br><span class="line">      update_i(i);</span><br><span class="line">      System.out.println(i);</span><br><span class="line">  		<span class="comment">// æ‰“å° 1</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">update_i</span><span class="params">(<span class="type">int</span> i)</span>&#123;</span><br><span class="line">      i = <span class="number">100</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="meta">@org</span>.junit.Test</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_update_string</span><span class="params">()</span>&#123;</span><br><span class="line">      <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">      update_str(str);</span><br><span class="line">      System.out.println(str);</span><br><span class="line">     	<span class="comment">// æ‰“å° hello world</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">update_str</span><span class="params">(String str)</span> &#123;</span><br><span class="line">      str = <span class="string">&quot;bye world&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@org</span>.junit.Test</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_update_string_builder</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="string">&quot;hello world &quot;</span>);</span><br><span class="line">      update_sb(sb);</span><br><span class="line">      System.out.println(sb);</span><br><span class="line">    	<span class="comment">// æ‰“å° hello world 123</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">update_sb</span><span class="params">(StringBuilder sb)</span> &#123;</span><br><span class="line">      sb.append(<span class="string">&quot;123&quot;</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>



<h2 id="åœ¨å†…å­˜ä¸­çš„è§£é‡Š"><a href="#åœ¨å†…å­˜ä¸­çš„è§£é‡Š" class="headerlink" title="åœ¨å†…å­˜ä¸­çš„è§£é‡Š"></a>åœ¨å†…å­˜ä¸­çš„è§£é‡Š</h2><p>é€šè¿‡ä¸Šé¢çš„ä¾‹å­å†ç»“åˆå®šä¹‰å…¶å®å·²ç»å¯ä»¥å¾—å‡ºç»“è®ºï¼Œjavaå°±æ˜¯å€¼ä¼ é€’çš„ã€‚ä¸‹é¢åœ¨é™„ä¸Šç®€å•çš„å›¾ç¤ºï¼Œå¸®åŠ©ç†è§£ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/Ran968777/images/imgs/image-20220818220817076.png" alt="image-20220818220817076"></p>
<h2 id="ç®€å•çš„æ€»ç»“"><a href="#ç®€å•çš„æ€»ç»“" class="headerlink" title="ç®€å•çš„æ€»ç»“"></a>ç®€å•çš„æ€»ç»“</h2><p>javaä¸­æ–¹æ³•å‚æ•°ä¼ é€’æ–¹å¼æ˜¯æŒ‰å€¼ä¼ é€’ã€‚</p>
<p>å¦‚æœå‚æ•°æ˜¯åŸºæœ¬ç±»å‹ï¼Œä¼ é€’çš„æ˜¯åŸºæœ¬ç±»å‹çš„å­—é¢é‡å€¼çš„æ‹·è´ã€‚</p>
<p>å¦‚æœå‚æ•°æ˜¯å¼•ç”¨ç±»å‹ï¼Œä¼ é€’çš„æ˜¯è¯¥å‚é‡æ‰€å¼•ç”¨çš„å¯¹è±¡åœ¨å †ä¸­åœ°å€å€¼çš„æ‹·è´ã€‚</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/31203609/answer/103467065">https://www.zhihu.com/question/31203609/answer/103467065</a></p>
<p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/31203609/answer/576030121">https://www.zhihu.com/question/31203609/answer/576030121</a></p>
<p><a target="_blank" rel="noopener" href="https://www.digitalocean.com/community/tutorials/java-is-pass-by-value-and-not-pass-by-reference">https://www.digitalocean.com/community/tutorials/java-is-pass-by-value-and-not-pass-by-reference</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/07/10/%E6%B5%85%E5%B0%9Din%E5%92%8Cor%E7%9A%84%E6%95%88%E7%8E%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ran">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/07/10/%E6%B5%85%E5%B0%9Din%E5%92%8Cor%E7%9A%84%E6%95%88%E7%8E%87/" class="post-title-link" itemprop="url">æµ…å°inå’Œorçš„æ•ˆç‡</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-07-10 12:35:53 / ä¿®æ”¹æ—¶é—´ï¼š13:26:11" itemprop="dateCreated datePublished" datetime="2022-07-10T12:35:53+08:00">2022-07-10</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="æµ…å°ä¸€ä¸‹in-å’Œ-or-çš„æ•ˆç‡"><a href="#æµ…å°ä¸€ä¸‹in-å’Œ-or-çš„æ•ˆç‡" class="headerlink" title="æµ…å°ä¸€ä¸‹in å’Œ or çš„æ•ˆç‡"></a>æµ…å°ä¸€ä¸‹in å’Œ or çš„æ•ˆç‡</h1><p>æ•°æ®æ¥æºäºï¼š<a target="_blank" rel="noopener" href="https://github.com/datacharmer/test_db">https://github.com/datacharmer/test_db</a></p>
<h2 id="é¦–å…ˆçœ‹ä¸€ä¸‹è¯­å¥"><a href="#é¦–å…ˆçœ‹ä¸€ä¸‹è¯­å¥" class="headerlink" title="é¦–å…ˆçœ‹ä¸€ä¸‹è¯­å¥"></a>é¦–å…ˆçœ‹ä¸€ä¸‹è¯­å¥</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- in è¯­å¥</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employees <span class="keyword">where</span> first_name <span class="keyword">in</span> (<span class="string">&#x27;Georgi&#x27;</span>,<span class="string">&#x27;Bezalel&#x27;</span>,<span class="string">&#x27;Parto&#x27;</span>,<span class="string">&#x27;Chirstian&#x27;</span>,<span class="string">&#x27;Kyoichi&#x27;</span>,<span class="string">&#x27;Anneke&#x27;</span>,<span class="string">&#x27;Tzvetan&#x27;</span>,<span class="string">&#x27;Saniya&#x27;</span>,<span class="string">&#x27;Sumant&#x27;</span>,<span class="string">&#x27;Duangkaew&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- or è¯­å¥</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> employees <span class="keyword">where</span> </span><br><span class="line">	first_name <span class="operator">=</span> <span class="string">&#x27;Georgi&#x27;</span> <span class="keyword">OR</span></span><br><span class="line">	first_name <span class="operator">=</span> <span class="string">&#x27;Bezalel&#x27;</span> <span class="keyword">OR</span></span><br><span class="line">	first_name <span class="operator">=</span> <span class="string">&#x27;Parto&#x27;</span> <span class="keyword">OR</span></span><br><span class="line">	first_name <span class="operator">=</span> <span class="string">&#x27;Chirstian&#x27;</span> <span class="keyword">OR</span></span><br><span class="line">	first_name <span class="operator">=</span> <span class="string">&#x27;Kyoichi&#x27;</span> <span class="keyword">OR</span></span><br><span class="line">	first_name <span class="operator">=</span> <span class="string">&#x27;Anneke&#x27;</span> <span class="keyword">OR</span></span><br><span class="line">	first_name <span class="operator">=</span> <span class="string">&#x27;Tzvetan&#x27;</span> <span class="keyword">OR</span></span><br><span class="line">	first_name <span class="operator">=</span> <span class="string">&#x27;Saniya&#x27;</span> <span class="keyword">OR</span></span><br><span class="line">	first_name <span class="operator">=</span> <span class="string">&#x27;Sumant&#x27;</span> <span class="keyword">OR</span></span><br><span class="line">	first_name <span class="operator">=</span> <span class="string">&#x27;Duangkaew&#x27;</span> ;</span><br><span class="line">	</span><br></pre></td></tr></table></figure>

<h2 id="è¿è¡Œæˆªå›¾"><a href="#è¿è¡Œæˆªå›¾" class="headerlink" title="è¿è¡Œæˆªå›¾"></a>è¿è¡Œæˆªå›¾</h2><ul>
<li>inçš„æ•ˆç‡</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Ran968777/images/imgs/image-20220425110540235.png" alt="image-20220425110540235"></p>
<ul>
<li><p>orçš„æ•ˆç‡</p>
<p><img src="https://cdn.jsdelivr.net/gh/Ran968777/images/imgs/image-20220425110637534.png" alt="image-20220425110637534"></p>
</li>
</ul>
<p>å› ä¸ºä¸Šé¢è¯­å¥çš„æ£€ç´¢èŒƒå›´åªæœ‰10ä¸ªï¼Œæ‰€ä»¥æ•ˆç‡çš„ä½“ç°è¿˜ä¸æ˜¯éå¸¸æ˜æ˜¾ã€‚ä½†æ˜¯å½“å‚æ•°é›†åˆèŒƒå›´å¢å¤§ï¼ŒINçš„æ€§èƒ½å´ä¸ä¼šå¤ªå¤§ä¸‹é™ï¼Œè€ŒORä¼šä¸‹é™éå¸¸å‰å®³ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå¤§æ¦‚çš„æ£€ç´¢åŸç†æ˜¯ï¼š</p>
<ul>
<li><p>ORï¼Œæ˜¯ä»æŸ¥è¯¢æ¡ä»¶çš„å‚æ•°é›†åˆé‡Œä¸€ä¸ªä¸€ä¸ªçš„å»åŒ¹é…ï¼Œç›´åˆ°åŒ¹é…æˆåŠŸæˆ–è€…ä¸€ä¸ªéƒ½åŒ¹é…ä¸ä¸Šï¼Œæ—¶é—´å¤æ‚åº¦O(n)</p>
</li>
<li><p>INï¼Œé€šè¿‡äºŒå‰æ ‘æŸ¥æ‰¾ï¼Œæ—¶é—´å¤æ‚åº¦O(log n)</p>
</li>
</ul>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/71064147">https://zhuanlan.zhihu.com/p/71064147</a></p>
<p><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/comparison-operators.html#operator_in">https://dev.mysql.com/doc/refman/8.0/en/comparison-operators.html#operator_in</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Ran</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">10</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">æ ‡ç­¾</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ran</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> å¼ºåŠ›é©±åŠ¨
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
